webpackJsonp([4],{29:function(e,t,a){"use strict";function d(e){if(void 0===e)return"-";switch(e){case 0:return"已预定";case 1:return"已服务";case 2:return"已关闭";default:return"-"}}function i(e){if(void 0===e)return"-";switch(e){case 0:return"未授权";case 1:return"已授权";case 2:return"已取消";default:return"-"}}function n(e,t){var a="YYYY年MM月DD日";return void 0===e?"-":(void 0!==t&&(a=t),o(e).format(a))}function l(e,t){return void 0===e||void 0===t?"-":(t-e)/1e3}Object.defineProperty(t,"__esModule",{value:!0}),t.convertOrderStatus=d,t.convertAuthStatus=i,t.formatTime=n,t.convertExtTableMileage=l;var o=a(13)},584:function(e,t,a){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}var i=a(4),n=d(i),l=a(14),o=d(l),r=a(1),u=d(r),s=a(3),f=d(s),c=a(2),v=d(c),h=a(0),p=d(h),m=a(9),y=d(m),I=a(26),C=d(I);a(27);var b=a(29),g=a(11),A=a(22),S=g.Form.Item,k=(g.Modal.confirm,g.Select.Option),w=(g.Select.OptGroup,g.DatePicker.MonthPicker,g.DatePicker.RangePicker),N=(a(13),(0,o.default)(k,{value:""},void 0,"全部")),M=(0,o.default)(k,{value:"2"},void 0,"大风车"),x=(0,o.default)(k,{value:"1"},void 0,"车牛"),R=(0,o.default)(k,{value:"3"},void 0,"弹个车"),V=(0,o.default)(k,{value:"4"},void 0,"卖车管家"),E=(0,o.default)(k,{},null,"全部"),P=(0,o.default)(k,{},"Y","是"),O=(0,o.default)(k,{},"N","否"),T=(0,o.default)(k,{value:""},void 0,"全部"),F=(0,o.default)(k,{value:"0"},void 0,"处理中"),q=(0,o.default)(k,{value:"1"},void 0,"待审核"),_=(0,o.default)(k,{value:"2"},void 0,"审核不通过"),D=(0,o.default)(k,{value:"3"},void 0,"金额待审核"),Y=(0,o.default)(k,{value:"4"},void 0,"待结算"),U=(0,o.default)(k,{value:"5"},void 0,"结案"),W=(0,o.default)(k,{value:""},void 0,"全部"),B=(0,o.default)(k,{value:"0"},void 0,"待查定"),z=(0,o.default)(k,{value:"1"},void 0,"正常理赔"),$=(0,o.default)(k,{value:"2"},void 0,"拒赔"),L=(0,o.default)(k,{value:"3"},void 0,"免赔"),J=(0,o.default)(k,{value:""},void 0,"全部"),j=(0,o.default)(k,{value:"1"},void 0,"中规车"),H=(0,o.default)(k,{value:"2"},void 0,"平行进口车"),K=(0,o.default)(k,{},null,"全部"),Q=(0,o.default)(k,{},0,"待开启"),G=(0,o.default)(k,{},1,"已开启"),X=(0,o.default)(k,{},2,"已关闭"),Z=(0,o.default)(w,{format:"YYYY-MM-DD"}),ee=(0,o.default)("br",{}),te=(0,o.default)("br",{}),ae=(0,o.default)("br",{}),de=(0,o.default)("br",{}),ie=(0,o.default)("br",{}),ne=(0,o.default)("br",{}),le=(0,o.default)("br",{}),oe=(0,o.default)("div",{},void 0,"-"),re=(0,o.default)(g.Input,{placeholder:"详细街道"}),ue=(0,o.default)(g.InputNumber,{min:0}),se=(0,o.default)("h1",{},void 0,"质保-报修管理"),fe=function(e){function t(){(0,u.default)(this,t);var a=(0,f.default)(this,e.call(this));return a.hanldeTableChange=function(e){a.state.pageSize=e.pageSize,a.state.page=e.current,a.state.query=a.props.form.getFieldsValue(),a.getByFilter().then(function(e){e.success})},a.handSubmit=function(){a.state.query=a.props.form.getFieldsValue(),a.getByFilter().then(function(e){e.success})},a.handleReset=function(){a.props.form.resetFields(),a.setState({query:{}})},a.handleProvinceChange=function(e){a.state.infoAdd.province=e.label,a.state.infoAdd.provinceCod=e.key},a.handleCityChange=function(e){a.state.infoAdd.city=e.label,a.state.infoAdd.cityCode=e.key},a.handleCancel=function(){a.setState({visible:!1})},a.showModal=function(e){a.setState({visible:!0,editingKey:e.key})},a.handleOk=function(e){a.setState({visible:!1})},a.handleAddCancel=function(){a.setState({addVisible:!1})},a.handleAddInfoCancel=function(){a.setState({addInfoVisible:!1})},a.handleAddOk=function(e){a.setState({addVisible:!1})},a.handleAddInfoOk=function(){var e=a.props.form.getFieldsValue;a.state.infoAdd.customerName=e().addName,a.state.infoAdd.customerPhone=e().addPhone,a.state.infoAdd.mileage=e().addMileage,a.state.infoAdd.carAddr=e().addCarAddr,a.state.infoAdd.malfunctionInfo=e().addMalfunctionInfo,a.props.form.validateFieldsAndScroll(function(e){if(e)for(var t in e)if("addName"==t||"addPhone"==t||"addMileage"==t||"addProvinceCity"==t||"addMalfunctionInfo"==t)return;a.review().then(function(){a.state.addInfoVisible=!1,a.state.addVisible=!1,A.RJAreaCascader.resetAreaCascader(),a.props.form.resetFields(),a.getByFilter()})})},a.onChangeCustomer=function(e){a.setState({creator:e.target.value})},a.openCreateWarrantyDialog=function(){a.setState({addVisible:!0})},a.openCreateWarrantyInfoDialog=function(e){a.state.infoAdd.qaId=e+"",a.setState({addInfoVisible:!0})},a.onChangeAddSearch=function(e){a.setState({addSearch:e.target.value})},a.handleAddSearch=function(){a.queryListByVinOrPhone()},a.handleExport=function(){var e=a.props.form.getFieldValue,t=e("type"),d=e("vin"),i=e("customerName"),n=e("buyerPhone"),l=e("validTime"),o=void 0==l?"":l[0],r=void 0==l?"":l[1],u=e("status"),s=e("extInsureChanceStatus"),f=e("repairResult"),c=e("isMember");c=void 0==c?"":c,d=void 0==d?"":d,i=void 0==i?"":i,n=void 0==n?"":n;var v=a.baseUri+"/admin/export/WarrantyExcelExport.html?vin="+d+"&customerName="+i+"&type="+t+"&buyerPhone="+n+"&start="+o+"&end="+r+"&status="+u+"&repairResult="+f+"&isMember="+c+"&extInsureChanceStatus="+s;window.location.href=v},a.handleEndAudit=function(e){a.setState({endAuditVisible:!0,selectedId:e})},a.handleEndAuditOk=function(){var e=a.props.form.getFieldValue;a.props.form.validateFieldsAndScroll(function(t){if(t)for(var d in t)if("settlementAmount"==d||"uploadProofImages"==d)return;a.state.settlementAmount=e("settlementAmount"),a.state.uploadProofImages=e("uploadProofImages"),a.state.remark=e("remark"),"string"==typeof a.state.uploadProofImages&&a.state.uploadProofImages.length>0&&(a.state.uploadProofImages=new Array(a.state.uploadProofImages)),a.state.uploadProofImages=a.state.uploadProofImages.join(","),a.finishReview().then(function(e){a.setState({endAuditVisible:!1}),a.getList()})})},a.handleEndAuditCancel=function(){a.setState({endAuditVisible:!1})},a.provinceCityValidator=function(e,t,a){(null==t||t.length<2)&&a("请输入市"),a()},a.onChangeCover=function(e){a.props.form.setFieldsValue({uploadProofImages:e})},a.state={productForAdd:{},query:{},status:{},visible:!1,addVisible:!1,addInfoVisible:!1,endAuditVisible:!1,addSearch:"",editingKey:"",creator:"",infoAdd:{},selectedId:"",page:1,pageSize:10},a}return(0,v.default)(t,e),t.prototype.getFields=function(){var e=this.props.form.getFieldDecorator,t=[];return t.push((0,o.default)(g.Col,{span:6},"vin",(0,o.default)(S,{label:"VIN码"},void 0,e("vin",{})((0,o.default)(g.Input,{style:{width:200},placeholder:"请输入"}))))),t.push((0,o.default)(g.Col,{span:6},"customerName",(0,o.default)(S,{label:"姓名"},void 0,e("customerName",{})((0,o.default)(g.Input,{style:{width:200},placeholder:"请输入"}))))),t.push((0,o.default)(g.Col,{span:6},"buyerPhone",(0,o.default)(S,{label:"联系方式"},void 0,e("buyerPhone",{})((0,o.default)(g.Input,{style:{width:200},placeholder:"请输入"}))))),t.push((0,o.default)(g.Col,{span:6},"type",(0,o.default)(S,{label:"订单类型"},void 0,e("type",{initialValue:""})((0,o.default)(g.Select,{style:{width:200}},void 0,N,M,x,R,V))))),t.push((0,o.default)(g.Col,{span:6},"isMemeber",(0,o.default)(S,{label:"会员报修"},void 0,e("isMember",{})((0,o.default)(g.Select,{style:{width:200},placeholder:"会员订单"},void 0,E,P,O))))),t.push((0,o.default)(g.Col,{span:6},"status",(0,o.default)(S,{label:"报修状态"},void 0,e("status",{initialValue:""})((0,o.default)(g.Select,{placeholder:"请选择",style:{width:200}},void 0,T,F,q,_,D,Y,U))))),t.push((0,o.default)(g.Col,{span:6},"repairResult",(0,o.default)(S,{label:"理赔结果"},void 0,e("repairResult",{initialValue:""})((0,o.default)(g.Select,{placeholder:"请选择",style:{width:200}},void 0,W,B,z,$,L))))),t.push((0,o.default)(g.Col,{span:6},"qaType",(0,o.default)(S,{label:"车辆类型"},void 0,e("qaType",{initialValue:""})((0,o.default)(g.Select,{placeholder:"请选择",style:{width:200}},void 0,J,j,H))))),t.push((0,o.default)(g.Col,{span:6},"extInsureChanceStatus",(0,o.default)(S,{label:"延保状态"},void 0,e("extInsureChanceStatus",{})((0,o.default)(g.Select,{style:{width:200},placeholder:"延保状态"},void 0,K,Q,G,X))))),t.push((0,o.default)(g.Col,{span:8},"validTime",(0,o.default)(S,{label:"报案日期"},void 0,e("validTime")(Z)))),t},t.prototype.render=function(){var e=this,t=this.props.form.getFieldDecorator,a=null;this.props._this&&this.props._this,this.state.list&&(a={size:"small",total:this.state.list.totalNumber,current:this.state.list.currentIndex,pageSize:this.state.list.pageSize,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50"],onShowSizeChange:function(e,t){},onChange:function(e,t){},showTotal:function(e){return"共"+e+"条"}});var d={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},i=[{title:"报案日期",dataIndex:"dateCreate",key:"dateCreate",display:!1},{title:"订单类型",dataIndex:"platform",key:"platform",width:100,render:function(e,t){return(0,o.default)("div",{},void 0,(0,b.convertPlatform)(t.orderModel.platform))}},{title:"车型",dataIndex:"carName",key:"carName",width:100,render:function(e,t){return(0,o.default)("div",{},void 0,t.orderModel.carName)}},{title:"车辆类型",dataIndex:"carType",key:"carType",width:100,render:function(e,t){return(0,o.default)("div",{},void 0,(0,b.convertCarType)(t.orderModel.qaType))}},{title:"VIN码",dataIndex:"vin",key:"vin",render:function(e,t){return(0,o.default)("div",{},void 0,t.orderModel.vin)}},{title:"报修所在地",dataIndex:"province",key:"province",width:200,render:function(e,t){return(0,o.default)("div",{},void 0,t.province," ",t.city," ",t.carAddr)}},{title:"会员报修",dataIndex:"isMember",key:"isMember",width:100,render:function(e,t){return"Y"==t.orderModel.isMember?"是":"否"}},{title:"报案人",dataIndex:"buyer",key:"buyer",render:function(e,t){return(0,o.default)("div",{},void 0,t.customerName,ee,t.phone)}},{title:"故障部位",dataIndex:"breakDownsShow",key:"breakDownsShow",render:function(e,t){var a=t.breakDownsShow.join(",");return(0,o.default)("div",{},void 0,a)}},{title:"理赔结果",dataIndex:"repairMode",key:"repairMode",render:function(e,t){return(0,o.default)("div",{},void 0,(0,b.convertWarrantyRepairMode)(e))}},{title:"报修状态",dataIndex:"status",key:"status",render:function(e,t){return(0,o.default)("div",{},void 0,(0,b.convertWarrantyStatus)(e))}},{title:"结案时间",dataIndex:"finishTime",key:"finishTime"},{title:"延保状态",dataIndex:"orderModel.extInsureChanceStatus",key:"orderModel.extInsureChanceStatus",display:!1,render:function(e,t){return(0,o.default)("div",{},void 0,(0,o.default)("div",{},void 0,(0,b.convertExtInsureStatus)(e)))}},{title:"操作",dataIndex:"option",width:100,key:"option",render:function(t,a){var d=void 0;(0==a.status||2==a.status)&&(0,b.containsResource)("INSURANCE_WARRANTY_SCHAME_FORMULATION")&&(0,b.getCurrentLoginUserId)(a.handlerId)?d=(0,o.default)("a",{onClick:function(){return location.href="claims.html?id="+a.id}},void 0,"理赔"):1==a.status&&(0,b.containsResource)("INSURANCE_WARRANTY_SCHAME_AUDIT")&&a.showAuditButton?d=(0,o.default)("a",{onClick:function(){return location.href="claimOrderCheck.html?id="+a.id}},void 0,"方案审核"):3==a.status&&(0,b.containsResource)("INSURANCE_WARRANTY_MONEY_AUDIT")&&a.showAuditButton?d=(0,o.default)("a",{onClick:function(){return location.href="claimOrderCheck.html?id="+a.id}},void 0,"金额审核"):4==a.status&&(0,b.containsResource)("INSURANCE_WARRANTY_SCHAME_FORMULATION")&&(d=(0,o.default)("a",{onClick:function(){return e.handleEndAudit(a.id)}},void 0,"上传凭证"));var i=(0,o.default)("a",{onClick:function(){return location.href="viewWarranty.html?id="+a.id}},void 0,"查看"),n=(0,o.default)("div",{},void 0,(0,o.default)("div",{},void 0,d," ",i));return(0,o.default)("div",{},void 0,n)}}],l=[{title:"客户信息",dataIndex:"buyerInfo",key:"buyerInfo",render:function(e,t){return(0,o.default)("div",{},void 0,t.buyerName,te,t.buyerPhone)}},{title:"车辆信息",dataIndex:"carInfo",key:"carInfo",render:function(e,t){return(0,o.default)("div",{},void 0,t.carName,ae,"VIN码:",t.vin)}},{title:"质保信息",dataIndex:"insuranceInfo",key:"insuranceInfo",render:function(e,t){var a=(0,o.default)("div",{},void 0,t.insuranceOrderSchemeInfo?t.insuranceOrderSchemeInfo.basicPrice:"","元");return t.insuranceOrderSchemeInfo?(0,o.default)("div",{},void 0,(0,b.convertQaStatus)(t.qaActive),de,t.insuranceOrderSchemeInfo?t.insuranceOrderSchemeInfo.productName:"",ie,a):(0,o.default)("div",{},void 0,(0,b.convertQaStatus)(t.qaActive),ne,t.insuranceOrderSchemeInfo?t.insuranceOrderSchemeInfo.productName:"",le)}},{title:"操作",dataIndex:"option",key:"option",render:function(t,a){return 1==a.qaActive?(0,o.default)("div",{},void 0,(0,o.default)("a",{onClick:function(){return e.openCreateWarrantyInfoDialog(a.qaId)}},void 0,"创建报修")):oe}}],r=(0,o.default)(g.Button,{type:"primary",onClick:this.openCreateWarrantyDialog},void 0,"创建报修信息"),u=void 0,s=void 0,f=void 0,c=this.baseUri+"/api/CommonApi/uploadNew.json";if(this.stateAlready){u=(0,o.default)(g.Modal,{title:"创建报修",width:600,visible:this.state.addVisible,onOk:this.handleAddOk,onCancel:this.handleAddCancel},void 0,(0,o.default)(g.Form,{},void 0,p.default.createElement(S,d,(0,o.default)(g.Input,{style:{width:400},onChange:this.onChangeAddSearch,placeholder:"请输入：客户电话/质保合同号/VIN码后六位，任意一种匹配质保信息"}),(0,o.default)(g.Button,{type:"primary",onClick:this.handleAddSearch},void 0,"查询")),(0,o.default)("div",{className:"table-content"},void 0,(0,o.default)(g.Table,{columns:l,dataSource:this.state.addList.items,size:"small",bordered:!0})))),s=(0,o.default)(g.Modal,{title:"报修信息",width:600,visible:this.state.addInfoVisible,onOk:this.handleAddInfoOk,onCancel:this.handleAddInfoCancel},void 0,(0,o.default)(g.Form,{},void 0,p.default.createElement(S,(0,n.default)({label:"报修人姓名"},d),t("addName",{rules:[{required:!0,message:"请输入报修人姓名",min:2,max:10}]})((0,o.default)(g.Input,{style:{width:200}}))),p.default.createElement(S,(0,n.default)({label:"报修人电话"},d),t("addPhone",{rules:[{required:!0,message:"请输入报修人电话",pattern:"((\\d{11})|^((\\d{7,8})|(\\d{4}|\\d{3})-(\\d{7,8})|(\\d{4}|\\d{3})-(\\d{7,8})-(\\d{4}|\\d{3}|\\d{2}|\\d{1})|(\\d{7,8})-(\\d{4}|\\d{3}|\\d{2}|\\d{1}))$)"}]})((0,o.default)(g.Input,{style:{width:200}}))),p.default.createElement(S,(0,n.default)({label:"车辆所在地"},d),t("addProvinceCity",{rules:[{required:!0,message:"请输入省"},{validator:this.provinceCityValidator}]})((0,o.default)(A.RJAreaCascader,{allowClear:!0,cascaderLevel:2,onProvinceChange:this.handleProvinceChange,onCityChange:this.handleCityChange})),t("addCarAddr")(re)),p.default.createElement(S,(0,n.default)({label:"当前表显里程"},d),t("addMileage",{rules:[{required:!0,message:"请输入当前表显里程"}]})(ue),"公里"),p.default.createElement(S,(0,n.default)({label:"故障现象描述"},d),t("addMalfunctionInfo",{rules:[{required:!0,message:"请输入故障现象描述",max:200}]})((0,o.default)(g.Input,{type:"textarea",style:{width:300}})))));var v=function(e){var t=/^(\-)*(\d+)\.(\d\d).*$/;return"string"==typeof e?isNaN(Number(e))?"":e.replace(t,"$1$2.$3"):"number"==typeof e?isNaN(e)?"":String(e).replace(t,"$1$2.$3"):""};f=(0,o.default)(g.Modal,{title:"上传凭证",width:600,visible:this.state.endAuditVisible,onOk:this.handleEndAuditOk,onCancel:this.handleEndAuditCancel},void 0,(0,o.default)(g.Form,{},void 0,p.default.createElement(S,(0,n.default)({},d,{label:"结算金额"}),t("settlementAmount",{rules:[{required:!0,message:"请输入结算金额"}]})((0,o.default)(g.InputNumber,{min:0,formatter:v,parser:v})),"元"),p.default.createElement(S,(0,n.default)({},d,{label:"上传凭证"}),t("uploadProofImages",{rules:[{required:!0,message:"请上传凭证图片"}]})((0,o.default)(A.RJImgUploader,{action:c,beforeUpload:this.beforeUpload,onRemove:function(t){var a=(t.file,t.updatedDefaultValues);e.setState({defaultValue:a})},onChange:function(t){return e.onChangeCover(t)}},void 0))),p.default.createElement(S,(0,n.default)({},d,{label:"备注"}),t("remark",{rules:[{message:"请输入备注",max:200}]})((0,o.default)(g.Input,{type:"textarea",style:{width:300}})))))}return this.stateAlready?(0,o.default)("div",{},void 0,se,(0,o.default)(g.Form,{layout:"inline",className:"ant-advanced-search-form"},void 0,(0,o.default)(g.Row,{gutter:24},void 0,this.getFields()),(0,o.default)(g.Row,{},void 0,(0,o.default)(g.Col,{span:24,style:{textAlign:"right"}},void 0,(0,o.default)(S,{},void 0,(0,o.default)(g.Button,{type:"primary",onClick:this.handSubmit},void 0,"搜索")),(0,o.default)(S,{},void 0,(0,o.default)(g.Button,{type:"primary",onClick:this.handleReset},void 0,"清除")),(0,o.default)(S,{},void 0,(0,b.containsResource)("INSURANCE_WARRANTY_CREATE")?r:""),(0,o.default)(S,{},void 0,(0,o.default)(g.Button,{type:"primary",onClick:this.handleExport},void 0,"导出Excel"))))),(0,o.default)("div",{},void 0,u,s,f),(0,o.default)("div",{},void 0,(0,o.default)("div",{className:"table-content"},void 0,(0,o.default)(g.Table,{columns:i,dataSource:this.state.list.items,rowKey:"productId",pagination:a,onChange:this.hanldeTableChange,bordered:!0})))):null},t}(C.default);fe=g.Form.create()(fe),y.default.render((0,o.default)("div",{},void 0,(0,o.default)(fe,{})),document.querySelector("#content"))}},[584]);